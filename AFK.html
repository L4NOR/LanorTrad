<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mode AFK - LanorTrad</title>
    <link rel="icon" href="https://www.creativefabrica.com/wp-content/uploads/2019/03/Monogram-LT-Logo-Design-by-Greenlines-Studios-580x387.jpg">

    <!-- MetaTags pour la page AFK -->
    <meta name="monetag" content="fc460e4f9414f6b44fed923ed5037fda">
    <meta name="description" content="Syst√®me AFK de LanorTrad - G√©n√©rez des revenus publicitaires automatiquement pendant votre absence. Une solution innovante pour optimiser votre temps sur notre plateforme.">
    <meta name="keywords" content="LanorTrad AFK, revenus publicitaires, g√©n√©ration automatique, syst√®me AFK, mode AFK">
    <meta name="author" content="LanorTrad">
    <meta name="robots" content="index, follow">
    <meta name="language" content="French">

    <!-- Open Graph (Facebook, Discord) -->
    <meta property="og:site_name" content="LanorTrad">
    <meta property="og:title" content="LanorTrad AFK - Syst√®me de G√©n√©ration Automatique">
    <meta property="og:description" content="D√©couvrez notre syst√®me AFK qui vous permet de g√©n√©rer des revenus publicitaires automatiquement. Une fonction exclusive LanorTrad.">
    <meta property="og:type" content="website"> 
    <meta property="og:locale" content="fr_FR">
    <meta property="og:image" content="images/Lanor/Banner.jpg">
    <meta property="og:url" content="https://lanortrad.netlify.app/AFK.html">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@LanorTrad">
    <meta name="twitter:title" content="Mode AFK - LanorTrad">
    <meta name="twitter:description" content="G√©n√©rez des revenus automatiquement avec le syst√®me AFK de LanorTrad. Une solution intelligente pour optimiser votre temps.">
    <meta name="twitter:image" content="../../images/Lanor/Banner.jpg">

    <!-- Autres balises-->
    <meta name="theme-color" content="#1E293B">
    <link rel="alternate" type="application/json+oembed" href="https://discord.gg/md37S7nhkZ">

    <!--Styles-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/afk.css">
    <link rel="stylesheet" href="css/intros.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .login-box {
            background: #1E293B;
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .discord-button {
            background: #5865F2;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            transition: background 0.3s;
            cursor: pointer;
        }

        .discord-button:hover {
            background: #4752C4;
        }

        /* Styles pour le contenu principal */
        .points-container {
            background: rgba(30, 41, 59, 0.95);
            border-radius: 8px;
            padding: 20px;
            margin: 20px;
            color: white;
        }

        .level-progress {
            width: 100%;
            height: 20px;
            background: #2d3748;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: #4f46e5;
            transition: width 0.5s ease-in-out;
        }

        .ads-container {
            margin: 20px;
            padding: 10px;
            border: 1px solid #4a5568;
            border-radius: 8px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid #4F46E5;
        }
    </style>

    <!--Scripts-->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2MZGH30P4J"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-2MZGH30P4J');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1999829370171408" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <meta name="google-site-verification" content="eImJAYI9qcdg0xDVXhoI6EWU97AaJQgT0-S9vOgLXFs"/>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-messaging-compat.js"></script>
</head>
<body>
    <!-- √âcran de chargement -->
    <div class="loading-container" id="loadingScreen">
        <div class="background-animation">
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
        </div>
        <div class="loading-content">
            <div class="logo">LanorTrad</div>
            <div class="loading-bar"></div>
            <div class="loading-text">Mode AFK en cours d'activation...</div>
        </div>
    </div>

    <!-- √âcran de connexion Discord -->
    <div id="loginScreen" class="login-container hidden">
        <div class="login-box">
            <h2 class="text-2xl font-bold mb-6">Connexion requise</h2>
            <p class="mb-6">Connectez-vous avec Discord pour acc√©der au mode AFK</p>
            <button onclick="loginWithDiscord()" class="discord-button">
                <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                </svg>
                Se connecter avec Discord
            </button>
        </div>
    </div>

    <!-- Contenu principal -->
    <div id="mainContent" class="hidden container mx-auto px-4 py-8">
        <!-- Profil utilisateur -->
        <div class="points-container">
            <div class="user-profile" id="userProfile">
                <!-- Sera rempli dynamiquement -->
            </div>
            <h2 class="text-2xl font-bold mb-4">Profil AFK</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <p class="text-lg">Points: <span id="points">0</span></p>
                    <p class="text-lg">Niveau: <span id="level">1</span></p>
                </div>
                <div>
                    <p class="text-sm mb-2">Progression niveau suivant:</p>
                    <div class="level-progress">
                        <div id="levelProgress" class="progress-bar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Zone de publicit√©s -->
        <div class="ads-container">
            <div id="ad-space" class="w-full h-[250px] bg-gray-800 flex items-center justify-center">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-1999829370171408"
                     data-ad-slot="votre-ad-slot"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
            </div>
        </div>

        <!-- Classement -->
        <div class="points-container">
            <h3 class="text-xl font-bold mb-4">Classement</h3>
            <div id="leaderboard" class="space-y-2">
                <!-- Sera rempli dynamiquement -->
            </div>
        </div>
    </div>

    <script>
        // Configuration Discord OAuth2
        const CLIENT_ID = 'VOTRE_CLIENT_ID';
        const REDIRECT_URI = encodeURIComponent(window.location.origin + window.location.pathname);
        const DISCORD_ENDPOINT = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&response_type=code&scope=identify%20guilds`;
        
        // Variables globales
        let points = 0;
        let level = 1;
        let lastActivity = Date.now();
        const pointsPerMinute = 10;
        const pointsForAd = 50;
        let userData = null;
        const discordWebhook = 'VOTRE_WEBHOOK_DISCORD';

        // V√©rification de l'authentification
        function checkAuth() {
            const token = localStorage.getItem('discord_token');
            if (token) {
                showMainContent();
                getUserInfo(token);
            } else {
                document.getElementById('loginScreen').classList.remove('hidden');
            }
        }

        // Connexion Discord
        function loginWithDiscord() {
            window.location.href = DISCORD_ENDPOINT;
        }

        // Gestion du retour OAuth2
        async function handleAuth() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            
            if (code) {
                try {
                    // √âchange du code contre un token (√† impl√©menter avec votre backend)
                    const response = await fetch('VOTRE_API_BACKEND/auth/discord', {
                        method: 'POST',
                        body: JSON.stringify({ code }),
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    const data = await response.json();
                    localStorage.setItem('discord_token', data.token);
                    
                    // Nettoyer l'URL
                    window.history.replaceState({}, document.title, window.location.pathname);
                    
                    showMainContent();
                    getUserInfo(data.token);
                } catch (error) {
                    console.error('Erreur d\'authentification:', error);
                    alert('Erreur lors de la connexion. Veuillez r√©essayer.');
                }
            }
        }

        // R√©cup√©ration des informations utilisateur
        async function getUserInfo(token) {
            try {
                const response = await fetch('https://discord.com/api/users/@me', {
                    headers: {
                        Authorization: `Bearer ${token}`
                    }
                });
                
                userData = await response.json();
                updateUIWithUserData(userData);
                loadUserProgress(userData.id);
            } catch (error) {
                console.error('Erreur lors de la r√©cup√©ration des informations:', error);
                logout();
            }
        }

        // Mise √† jour de l'interface utilisateur
        function updateUIWithUserData(userData) {
            const avatarUrl = userData.avatar 
                ? `https://cdn.discordapp.com/avatars/${userData.id}/${userData.avatar}.png`
                : 'https://cdn.discordapp.com/embed/avatars/0.png';

            document.getElementById('userProfile').innerHTML = `
                <img src="${avatarUrl}" alt="Avatar" class="user-avatar">
                <div>
                    <h3 class="font-bold">${userData.username}</h3>
                    <p class="text-sm text-gray-300">#${userData.discriminator}</p>
                </div>
            `;
        }

        // Gestion des points et niveaux
        function updatePoints() {
            if (!userData) return;

            const now = Date.now();
            const minutesPassed = (now - lastActivity) / (1000 * 60);
            points += Math.floor(minutesPassed * pointsPerMinute);
            lastActivity = now;
            
            checkLevel();
            updateUI();
            saveProgress();
        }

        function checkLevel() {
            const newLevel = Math.floor(Math.sqrt(points / 100)) + 1;
            if (newLevel > level) {
                level = newLevel;
                announceLevel();
            }
        }

        async function announceLevel() {
            if (!userData) return;

            const message = {
                content: `üéâ ${userData.username} vient de passer au niveau ${level} !`,
                embeds: [{
                    title: "Nouveau niveau !",
                    description: `Points: ${points}`,
                    color: 0x4F46E5
                }]
            };

            try {
                await fetch(discordWebhook, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(message)
                });
            } catch (error) {
                console.error('Erreur lors de l\'envoi de l\'annonce:', error);
            }
        }

        // Sauvegarde et chargement des progr√®s
        async function saveProgress() {
            if (!userData) return;

            const progress = {
                userId: userData.id,
                points,
                level,
                lastActivity
            };

            try {
                await fetch('VOTRE_API_BACKEND/progress/save', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('discord_token')}`
                    },
                    body: JSON.stringify(progress)
                });
            } catch (error) {
                console.error('Erreur lors de la sauvegarde:', error);
            }
        }

        async function loadUserProgress(userId) {
            try {
                const response = await fetch(`VOTRE_API_BACKEND/progress/${userId}`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('discord_token')}`
                    }
                });
                
                const progress = await response.json();
                points = progress.points || 0;
                level = progress.level || 1;
                lastActivity = progress.lastActivity || Date.now();
                
                updateUI();
            } catch (error) {
                console.error('Erreur lors du chargement des progr√®s:', error);
            }
        }

        // Mise √† jour de l'interface
        function updateUI() {
            document.getElementById('points').textContent = points;
            document.getElementById('level').textContent = level;
            
            const nextLevelPoints = (Math.pow(level, 2) * 100);
            const progress = (points / nextLevelPoints) * 100;
            document.getElementById('levelProgress').style.width = `${Math.min(progress, 100)}%`;
        }

        // Gestion des publicit√©s
        function handleAdClick() {
            points += pointsForAd;
            updateUI();
            saveProgress();
        }

        // D√©connexion
        function logout() {
            localStorage.removeItem('discord_token');
            userData = null;
            points = 0;
            level = 1;
            lastActivity = Date.now();
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        // Navigation
        function showMainContent() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainContent').classList.remove('hidden');
        }

        // Mise √† jour r√©guli√®re
        setInterval(updatePoints, 60000);
        
        // Gestion des erreurs d'authentification
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            if (msg.includes('Discord') || msg.includes('Authorization')) {
                logout();
            }
            return false;
        };
        </script>        
    </body>
</html>